"use strict";angular.module("angularChatApp",["ui.bootstrap","firebase","ngCookies","ngResource","ngSanitize","ui.router"]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){b.otherwise("/"),c.html5Mode(!0)}]),angular.module("angularChatApp").factory("Room",["$firebaseObject","$firebaseArray",function(a,b){var c=new Firebase("https://angular-chatroom.firebaseio.com/"),d=b(c.child("rooms")),e=new Firebase("https://angular-chatroom.firebaseio.com/"),f=b(e.child("messages"));return{all:d,message:f}}]).filter("relevantMessages",function(){return function(a,b){for(var c=[],d=0;d<a.length;d++)return a[d].roomId==b&&c.push(a[d]),c}}).filter("ordinal",function(){return function(a){if(isNaN(a)||1>a)return a;var b=a%10;return 1===b?a+"st":2===b?a+"nd":3===b?a+"rd":b>3?a+"th":void 0}}).controller("MainCtrl",["$scope","$http","$firebaseObject","$firebaseArray","Room",function(a,b,c,d,e){var f=new Firebase("https://angular-chatroom.firebaseio.com/");a.data=c(f),a.chat=d(f),a.roomList=e.all,a.messagesList=e.message,a.activeRoom="Main Room",a.currentUser="Anonymous User",a.containsComparator=function(a,b){return b.indexOf(a)>-1},a.filterByRoom=function(b){return-1!==a.activeRoom.indexOf(messagesList.roomId)},a.addRoom=function(){a.roomList.$add({name:a.newChatroomText}),a.roomList.$save(),a.newChatroomText=""},a.addMessage=function(){var b=a.newContent,c=a.activeRoom,d=a.currentUser,e={name:d,content:b,sentAt:moment().format("MMM Do, hh:mmA"),roomId:c};a.messagesList.$add(e),a.messagesList.$save(e),a.newContent=""},a.changeRoom=function(b){a.activeRoom=a.roomList[b].name},a.changeUserName=function(){a.currentUser=a.newUserName,console.log(a.currentUser),a.newUserName=""}}]).run(["$cookies",function(a,b,c){a.currentUser&&"Logan Howlett"!==a.currentUser||console.log("Cookies are delicious")}]).controller("ModalDemoCtrl",["$scope","$modal","$log","Room",function(a,b,c,d){a.items=["item1","item2","item3"],a.animationsEnabled=!0,a.open=function(d){var e=b.open({animation:a.animationsEnabled,templateUrl:"app/partials/modal-roomname.html",controller:"ModalInstanceCtrl",size:d,resolve:{items:function(){return a.items}}});e.result.then(function(a){console.log(a)},function(){c.info("Modal dismissed at: "+new Date)})},a.toggleAnimation=function(){a.animationsEnabled=!a.animationsEnabled}}]).controller("ModalInstanceCtrl",["$scope","$modalInstance","items",function(a,b,c){a.items=c,a.selected={item:a.items[0]},a.ok=function(){b.close(a.selected.item)},a.cancel=function(){b.dismiss("cancel")}}]),angular.module("angularChatApp").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"})}]),angular.module("angularChatApp").factory("Modal",["$rootScope","$modal",function(a,b){function c(c,d){var e=a.$new();return c=c||{},d=d||"modal-default",angular.extend(e,c),b.open({templateUrl:"components/modal/modal.html",windowClass:d,scope:e})}return{confirm:{"delete":function(a){return a=a||angular.noop,function(){var b,d=Array.prototype.slice.call(arguments),e=d.shift();b=c({modal:{dismissable:!0,title:"Confirm Delete",html:"<p>Are you sure you want to delete <strong>"+e+"</strong> ?</p>",buttons:[{classes:"btn-danger",text:"Delete",click:function(a){b.close(a)}},{classes:"btn-default",text:"Cancel",click:function(a){b.dismiss(a)}}]}},"modal-danger"),b.result.then(function(b){a.apply(b,d)})}}}}}]),angular.module("angularChatApp").controller("NavbarCtrl",["$scope","$location",function(a,b){a.menu=[{title:"Home",link:"/"}],a.isCollapsed=!0,a.isActive=function(a){return a===b.path()}}]),angular.module("angularChatApp").run(["$templateCache",function(a){a.put("app/main/main.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class=row><div class="col-sm-3 chat-sidebar"><h1 class=page-header>Chatrooms:</h1><p>Add a new room:</p><form><input ng-model="newChatroomText"><button type=submit data-ng-click=addRoom()>Add Room</button></form><p>Enter your user name:</p><form><input ng-model="newUserName"><button type=submit data-ng-click=changeUserName()>User Name</button></form><div ng-include="\'app/partials/my-chatroom-list.html\'"></div></div><div class=col-sm-9><h2 class=page-header>Current Chatroom: {{activeRoom}}</h2><form><span>User Name: {{ currentUser }}</span><input ng-model="newContent"><button type=submit data-ng-click=addMessage()>Add Message</button></form><p>{{ newContent | ordinal}}</p><ul class=show-chat-text><li ng-repeat="line in messagesList | filter:{roomId:activeRoom}:containsComparator "><strong>Name:</strong> {{ line.name }} <strong>Message:</strong> {{ line.content }} <strong>Room:</strong> {{ line.roomId }} <strong>Time Sent:</strong> {{ line.sentAt }}</li></ul></div></div></div><footer class=footer><div class=container><p>Angular Fullstack v2.0.13 | <a href=https://twitter.com/tyhenkel>@tyhenkel</a> | <a href="https://github.com/DaftMonk/generator-angular-fullstack/issues?state=open">Issues</a></p></div></footer>'),a.put("app/partials/modal-roomname.html",'<div class=modal-header><h3 class=modal-title>Enter Room</h3></div><div class=modal-body><form><input ng-model="newChatroomText"><button type=submit data-ng-click=close(newChatroomText)>Add Room</button></form><p>{{ newChatroomText }}</p><!--\n            <ul>\n                <li ng-repeat="item in items">\n                    <a ng-click="selected.item = item">{{ item }}</a>\n                </li>\n            </ul>\n            Selected: <b>{{ selected.item }}</b>\n        </div>\n        <div class="modal-footer">\n            <button class="btn btn-primary" ng-click="ok()">OK</button>\n            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>\n\n--></div><!--\n    <button class="btn btn-default" ng-click="open()">Open me!</button>\n    <button class="btn btn-default" ng-click="open(\'lg\')">Large modal</button>\n    <button class="btn btn-default" ng-click="open(\'sm\')">Small modal</button>\n    <button class="btn btn-default" ng-click="toggleAnimation()">Toggle Animation ({{ animationsEnabled }})</button>\n    <div ng-show="selected">Selection from a modal: {{ selected }}</div>\n-->'),a.put("app/partials/modal-username.html",'<div class=modal-header><h3 class=modal-title>Enter User Name</h3></div><div class=modal-body><form><input ng-model="newChatroomText"><button type=submit data-ng-click=addRoom()>Add Room</button></form><p>{{ newChatroomText }}</p><!--\n            <ul>\n                <li ng-repeat="item in items">\n                    <a ng-click="selected.item = item">{{ item }}</a>\n                </li>\n            </ul>\n            Selected: <b>{{ selected.item }}</b>\n        </div>\n        <div class="modal-footer">\n            <button class="btn btn-primary" ng-click="ok()">OK</button>\n            <button class="btn btn-warning" ng-click="cancel()">Cancel</button>\n\n--></div><!--\n    <button class="btn btn-default" ng-click="open()">Open me!</button>\n    <button class="btn btn-default" ng-click="open(\'lg\')">Large modal</button>\n    <button class="btn btn-default" ng-click="open(\'sm\')">Small modal</button>\n    <button class="btn btn-default" ng-click="toggleAnimation()">Toggle Animation ({{ animationsEnabled }})</button>\n    <div ng-show="selected">Selection from a modal: {{ selected }}</div>\n-->'),a.put("app/partials/my-chatroom-list.html",'<!-- Input not working here but it works in main.html --><h3>Available Chatrooms</h3><ul class=show-room-names><li ng-repeat="rooms in roomList"><a ui-sref=main ng-click=changeRoom($index)>{{ rooms.name}}</a></li></ul><!-- <ul ng-repeat="roomname in roomlist">  add an ng-click ? \n  <li> {{ roomname.all }} </li>\n  <li> Me </li>\n</ul>\n-->'),a.put("components/modal/modal.html",'<div class=modal-header><button ng-if=modal.dismissable type=button ng-click=$dismiss() class=close>&times;</button><h4 ng-if=modal.title ng-bind=modal.title class=modal-title></h4></div><div class=modal-body><p ng-if=modal.text ng-bind=modal.text></p><div ng-if=modal.html ng-bind-html=modal.html></div></div><div class=modal-footer><button ng-repeat="button in modal.buttons" ng-class=button.classes ng-click=button.click($event) ng-bind=button.text class=btn></button></div>'),a.put("components/navbar/navbar.html",'<div class="navbar navbar-default navbar-static-top" ng-controller=NavbarCtrl><div class=container><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="/" class=navbar-brand><span class="glyphicon glyphicon-phone"></span> Angular Chat</a></div><div collapse=isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href={{item.link}}>{{item.title}}</a></li></ul></div></div></div>')}]);